services:
  Backoffice.Products.domain.ProductEventStore:
    class: ../../../../contexts/backoffice/product/infrastructure/persistence/mongo-product-event-store
    main: MongoProductEventStore
    arguments: ['@Backoffice.Shared.ConnectionManager']

  Backoffice.Products.application.ProductCreator:
    class: ../../../../contexts/backoffice/product/application/create/product-creator
    main: ProductCreator
    arguments: ['@Backoffice.Shared.domain.EventBus', '@Backoffice.Products.domain.ProductEventStore']

  Backoffice.Products.CreateProductCommandHandler:
    class: ../../../../contexts/backoffice/product/application/command-handlers/create-product-command-handler
    main: CreateProductCommandHandler
    arguments: ['@Backoffice.Products.application.ProductCreator']
    tags:
      - { name: 'commandHandler' }
