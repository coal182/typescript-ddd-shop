<h3>Cart</h3>

<div class="row">
  <div class="col-md-12">
    <table mat-table [dataSource]="items" class="cart-table" #table>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let item"> {{item.product.name}} </td>
      </ng-container>
      <ng-container matColumnDef="qty">
        <th mat-header-cell *matHeaderCellDef> Qty </th>
        <td mat-cell *matCellDef="let item"> {{item.qty}} </td>
      </ng-container>
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef> Price </th>
        <td mat-cell *matCellDef="let item"> {{item.price | currency}} </td>
      </ng-container>
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Actions </th>
        <td mat-cell *matCellDef="let item"> 
          <button mat-icon-button type="button" (click)="removeFromCart(item)">
            <mat-icon mat-icon matTooltip="Remove">delete</mat-icon>
          </button>  
        </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
    
    </table>
    
    <!--<p>
      <a routerLink="/shipping">Shipping Prices</a>
    </p>-->
    
    <br />
    <br />
    <br />

    <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="form-signin text-center">
      <h3 class="h3 mb-3 font-weight-normal">
        Confirm your order
      </h3>

      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input
          matInput
          type="text"
          formControlName="name"
          placeholder="name"
        />
        <!--<mat-error *ngIf="profileForm.get('name')?.errors && profileForm.get('name')?.touched">
          {{validateFormService.getError('Name', profileForm.get('name'))}}
        </mat-error>-->
      </mat-form-field>

      <br />

      <mat-form-field appearance="outline">
        <mat-label>Address</mat-label>
        <input
          matInput
          type="text"
          formControlName="address"
          placeholder="address"
        />
        <!--<mat-error *ngIf="profileForm.get('address')?.errors && profileForm.get('address')?.touched">
          {{validateFormService.getError('address', profileForm.get('address'))}}
        </mat-error>-->
      </mat-form-field>

      <br />
      <button type="submit" mat-flat-button color="primary" data-testid="submit-button" [disabled]="!checkoutForm.valid">Confirm purchase</button>

    </form>
  </div>
</div>
